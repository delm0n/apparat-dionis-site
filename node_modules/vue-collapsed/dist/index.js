"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),b="--vc-auto-duration",$=`height var(${b}) cubic-bezier(0.33, 1, 0.68, 1)`,d={padding:0},H={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function x(n){return{height:`${(n==null?void 0:n.scrollHeight)??0}px`}}function y(n){if(!n)return{};const{transition:u}=getComputedStyle(n);return u==="all 0s ease 0s"?{transition:$}:{transition:u}}function C(n){if(!n)return!0;const{transition:u}=getComputedStyle(n);return window.matchMedia("(prefers-reduced-motion: reduce)").matches||u.includes("none")||u.includes("height 0s")}e.defineComponent({inheritAttrs:!0});const R=e.defineComponent({__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(n,{emit:u}){const p=n,o=e.toRef(p,"when"),i=e.toRef(p,"baseHeight"),c=e.computed(()=>({overflow:"hidden",height:`${i.value}px`})),h=e.computed(()=>({...d,...i.value===0?{display:"none"}:c.value})),l=e.ref(null),r=e.ref(o.value?"expanded":"collapsed"),a=e.shallowRef({}),f=e.ref(300),g=e.computed(()=>({[b]:`${f.value}ms`}));function m(){a.value=d,r.value="expanded",u("expanded")}function w(){a.value=h.value,r.value="collapsed",u("collapsed")}function S(t){var s,v;t.target===l.value&&t.propertyName==="height"&&(o.value?((s=l.value)==null?void 0:s.scrollHeight)===parseFloat(t.target.style.height)&&m():((v=l.value)==null?void 0:v.style.height)===`${i.value}px`&&w())}return e.onMounted(()=>{if(!l.value)return;o.value||i.value!==0||(a.value=H);const t=function(s=0){if(s===0)return 0;const v=s/36;return Math.round(10*(4+15*v**.25+v/5))}(l.value.scrollHeight-i.value);f.value=t<=0?300:t,a.value=o.value?d:h.value}),e.watch(o,t=>{if(t){if(C(l.value))return m();r.value="expanding",u("expand"),a.value={...d,...c.value,...g.value,willChange:"height"},requestAnimationFrame(()=>{a.value={...a.value,...x(l.value),...y(l.value)}})}else{if(C(l.value))return w();r.value="collapsing",u("collapse"),a.value={...a.value,...g.value,...x(l.value),willChange:"height"},requestAnimationFrame(()=>{a.value={...a.value,...c.value,...y(l.value)}})}}),e.watch(i,t=>{o.value||(a.value={...a.value,...t===0?{display:"none"}:{transition:"none",height:`${t}px`}})}),(t,s)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(p.as),{ref_key:"collapseRef",ref:l,style:e.normalizeStyle(a.value),onTransitionend:S,"data-collapse":r.value},{default:e.withCtx(()=>[e.renderSlot(t.$slots,"default",e.normalizeProps(e.guardReactiveProps({state:r.value})))]),_:3},40,["style","data-collapse"]))}});exports.Collapse=R;
